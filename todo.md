# ROWELL HPLC Website - TODO List

## 📊 产品数据批量更新任务（2025-01-03）- 当前最高优先级

### Phase 1: CSV文件分析
- [ ] 读取CSV文件（2438个产品）
- [ ] 分析CSV文件的列结构
- [ ] 识别关键字段（产品编号、名称、规格等）
- [ ] 统计产品类型分布
- [ ] 统计品牌分布
- [ ] 生成CSV数据分析报告

### Phase 2: 数据对比分析
- [x] 对比CSV与数据库产品数量（2438 vs 2484）
- [x] 识别需要更新的产品（564个）
- [x] 识别需要删除的产品（0个）
- [x] 识别需要新增的产品（214个未匹配）
- [x] 分析产品编号匹配规则（品牌+原品牌零件号）
- [x] 生成数据对比报告

### Phase 3: 批量更新策略设计
- [x] 导出214个未匹配产品清单（供爬虫使用）
- [x] 设计产品匹配逻辑（品牌+原品牌零件号）
- [x] 设计更新字段列表（name, partNumber, specifications等）
- [x] 设计产品分类映射规则（基于产品名称关键词）
- [x] 创建批量更新脚本（更新564个产品）
- [x] 创建数据验证脚本

### Phase 4: 执行批量更新
- [x] 备份当前数据库数据（2484个产品）
- [x] 执行批量更新脚本（成功更新564个产品）
- [x] 验证更新结果（99.6%通过）
- [x] 生成更新报告

### Phase 5: 验证和报告
- [x] 验证产品数量正确（2484个，不变）
- [x] 验证产品信息正确（562/564，99.6%）
- [x] 验证产品分类正确（自动分类完成）
- [x] 生成最终验证报告
- [x] 向用户报告更新结果

---

## 🐛 紧急Bug修复 - 产品分类筛选问题（2025-01-02）

- [x] 调查为什么HPLC Columns子分类显示0个产品
- [x] 检查product_categories表的关联关系
- [x] 修复产品和子分类的关联
- [x] 为所有产品类型创建对应的子分类
- [x] 批量关联所有2484个产品到正确的子分类
- [x] 验证100%产品分类覆盖率

---

## 🏷️ 浏览器标签页优化（2025-01-02）

- [x] 修改网站标题,去掉"测试网站"
- [x] 更换favicon为ROWELL logo
- [x] 确保所有页面都使用正确的标题

---

## 🤖 AI产品顾问功能开发（2025-01-02）

### 后端开发完成
- [x] 创建加密工具（AES-256）
- [x] 创建缓存工具（hash生成、关键词提取）
- [x] 创建AI对话处理器（server/ai/chat-handler.ts）
- [x] 集成Manus LLM服务和系统提示词
- [x] 实现智能缓存逻辑
- [x] 实现并发控制队列
- [x] 添加LLM API成本追踪
- [x] 创建ai.chat mutation（处理用户消息）
- [x] 创建ai.feedback mutation（点赞/点踩）
- [x] 创建ai.history query（获取对话历史）
- [x] 创建ai.deleteConversation mutation（自助删除）
- [x] 创建ai.updateConsent mutation（更新隐私设置）
- [x] 创建ai.queueStatus query（队列状态监控）

### 前端开发完成
- [x] 创建AIChatWidget组件（浮动按钮+聊天窗口）
- [x] 创建ConsentDialog组件（标准模式vs隐私模式）
- [x] 将聊天组件添加到所有页面（App.tsx）

---

## 🎨 网站内容全面升级 - 体现AI赋能和多品牌优势（2025-01-02）

- [x] 更新Hero section - 突出"AI-Powered Solution Provider"
- [x] 重写"Why Choose ROWELL" - 3个新核心优势
- [x] 在产品详情页添加"Ask AI about this product"按钮
- [x] 在产品列表页添加"Need help choosing?"提示
- [x] 在搜索结果页添加"Can't find what you need? Ask AI"
- [x] 在筛选器旁边添加AI推荐入口
- [x] 优化CTA按钮文案

---

## 🚀 网站升级：从色谱柱网站升级为色谱耗材网站（除仪器与化学品）

- [x] 分析当前数据库schema和产品分类
- [x] 检查网站内容中所有提及"色谱柱"的地方
- [x] 制定详细的升级方案文档
- [x] 更新首页标题和描述：从"HPLC色谱柱"改为"色谱耗材"
- [x] 更新About页面公司介绍
- [x] 更新产品页面标题和分类
- [x] 更新所有8种语言的翻译文件
- [x] 更新SEO元数据和页面标题

---

## 历史任务记录

### 数据恢复和导入（2025-10-31）
- [x] 合并products_final_ready.csv和final_7brands_database_clean.csv
- [x] 去重验证（基于brand + partNumber）
- [x] 清洗和标准化数据格式
- [x] 导入2,484个产品到数据库
- [x] 创建产品分类关联（11种产品类型）
- [x] 验证所有分类
- [x] 测试产品搜索、筛选、分页功能
- [x] 创建checkpoint

### 品牌合并任务（2025-10-31）
- [x] 创建品牌合并脚本
- [x] 合并Merck品牌
- [x] 合并Thermo Fisher品牌
- [x] 验证合并后的数据
- [x] 保存checkpoint

### Logo更新和免责声明（2025-10-31）
- [x] 上传ROWELL正式Logo
- [x] 更新导航栏和页脚Logo
- [x] 生成favicon
- [x] 添加非授权经销商免责声明（中英文）
- [x] 保存checkpoint

---

最后更新：2025-01-03（开始产品数据批量更新任务）


---

## 🔍 数据库独有产品调查任务（2025-01-03）

### 背景
- 数据库中有1,829个产品在CSV验证清单中不存在
- 占数据库总产品数的73.6%
- 需要调查这些产品的来源和有效性

### Phase 1: 分析数据库独有产品特征
- [x] 统计品牌分布
- [x] 统计产品类型分布
- [x] 分析零件号格式
- [x] 识别可能的数据来源
- [x] 随机抽取50个产品（第一轮）
- [x] 生成抽样验证清单

### Phase 2: 第一轮抽样验证（50个产品）
- [ ] 用户使用爬虫软件验证
- [ ] 在品牌官网验证产品存在性
- [ ] 记录验证结果（通过/失败）
- [ ] 统计验证通过率

### Phase 3: 设计处理策略
- [ ] 根据验证结果制定策略
- [ ] 确定保留/删除/更新的标准
- [ ] 获取用户批准

### Phase 4: 执行处理
- [ ] 备份数据
- [ ] 执行批量操作
- [ ] 验证结果

### Phase 5: 报告结果
- [ ] 生成处理报告
- [ ] 向用户报告


---

## 📦 214个产品零件号更新任务（2025-01-03）

### 背景
- 用户已使用爬虫软件提取214个产品的零件号
- 需要清洗数据并批量更新到数据库

### Phase 1: 数据清洗
- [x] 读取CSV文件
- [x] 检查数据完整性
- [x] 验证零件号格式
- [x] 处理重复数据（44个重复）
- [x] 生成清洗报告

### Phase 2: 数据库匹配
- [ ] 匹配数据库产品
- [ ] 准备更新脚本
- [ ] 验证匹配结果

### Phase 3: 批量更新
- [ ] 备份数据库
- [ ] 执行批量更新
- [ ] 验证更新结果

### Phase 4: 报告结果
- [ ] 生成更新报告
- [ ] 向用户报告


---

## 🧹 任务纯洁性维护 - 移除SendGrid（2025-01-04）

### 目标
移除SendGrid和邮件营销功能，保持网站建设任务的纯洁性

### Phase 1: 移除SendGrid依赖和邮件功能
- [x] 移除package.json中的@sendgrid/mail依赖
- [x] 移除代码中的邮件发送功能
- [x] 移除AI顾问的邮件通知功能
- [x] 清理相关环境变量引用
- [x] 更新文档，移除SendGrid相关说明

### Phase 2: 撰写群发任务指令文档
- [ ] 分析ROWELL网站的产品、优势、目标客户
- [ ] 设计邮件营销策略和工作流程
- [ ] 撰写完整的任务指令（包含工具推荐、内容模板）
- [ ] 定义关键性能指标（KPI）

### Phase 3: 设计考核机制
- [x] 定义监控指标（打开率、回复率、转化率）
- [x] 设计数据收集接口（ROWELL API）
- [x] 创建考核报告模板（周报、月报）
- [x] 建立定期审查流程（双周会议）
- [x] 设计自动化监控方案

### Phase 4: 更新项目文档并保存checkpoint
- [x] 更新项目 README
- [x] 更新测试指南
- [x] 保存checkpoint

### Phase 5: 交付
- [ ] 交付清理后的项目
- [ ] 交付群发任务指令文档
- [ ] 交付考核机制文档


---

## 🔄 恢复SendGrid业务通知邮件（2025-01-03）

### 背景
- 误解需求，移除了业务通知邮件
- 应该只移除营销推广功能（但网站中没有）
- 需要恢复SendGrid和所有邮件通知功能

### Phase 1: 恢复SendGrid依赖和邮件功能
- [x] 重新安装@sendgrid/mail包
- [x] 恢复inquiry-utils.ts中的邮件发送函数
- [x] 恢复monthly-report.ts中的邮件发送函数
- [x] 恢复routers.ts中的邮件发送调用（无需修改）

### Phase 2: 测试邮件功能
- [x] 测试询价通知邮件（代码已恢复）
- [x] 测试客户确认邮件（代码已恢复）
- [x] 验证所有功能正常工作（依赖已安装）

### Phase 3: 更新文档说明
- [x] 在README中说明邮件功能的用途
- [x] 区分业务通知邮件 vs 营销推广邮件
- [x] 创建EMAIL_FUNCTIONALITY_SCOPE.md文档

### Phase 4: 保存checkpoint
- [x] 保存恢复后的checkpoint (f5d394fe)
- [x] 验证网站完整性


---

## 📧 邮件营销计划制定任务 (2025-01-03)

### 背景
- 网站目前没有注册客户
- 需要主动开发新客户（冷启动邮件营销）
- 制定基于ROWELL实际情况的邮件群发计划

### Phase 1: 分析ROWELL网站现状和目标市场
- [x] 分析网站产品组合（2,623个产品，11个品牌）
- [x] 确定目标客户画像（行业、职位、地区）
- [x] 分析竞争优势和卖点

### Phase 2: 设计邮件营销策略和活动结构
- [x] 确定营销目标和KPI
- [x] 设计邮件序列（冷启动、跟进、转化）
- [x] 制定客户名单获取策略

### Phase 3: 创建邮件营销计划文档
- [x] 编写详细的执行计划
- [x] 包含邮件模板、发送时间表、监控指标
- [x] 提供可操作的步骤和工具建议

### Phase 4: 交付邮件营销计划
- [x] 审核计划完整性
- [x] 交付给用户审阅


---

## 📧 邮件营销项目归档记录 (2025-01-03)

**状态**: 已完成规划，邮件营销任务已启动
**重启关键词**: **ROWELL-EMAIL-SOLO-2025**

### 归档位置
- 路径: `/home/ubuntu/EMAIL_MARKETING_ARCHIVE/`
- 主索引: `EMAIL_MARKETING_ARCHIVE_INDEX.md`

### 最终采用方案
- [x] 单人操作执行方案
- [x] 时间投入: 每周5-8小时
- [x] 工具成本: $108-128/月
- [x] 预期ROI: 517-1,072%

### 归档文档清单
- [x] 完整邮件营销计划 (ROWELL_EMAIL_MARKETING_PLAN.md)
- [x] 工具选型与成本分析 (EMAIL_MARKETING_TOOLS_AND_COSTS.md)
- [x] 成果最大化策略 (EMAIL_MARKETING_RESULTS_STRATEGY.md)
- [x] 单人操作执行方案 (EMAIL_MARKETING_SOLO_PLAN.md) ⭐
- [x] 归档索引文档 (EMAIL_MARKETING_ARCHIVE_INDEX.md)

**备注**: 当需要重新讨论邮件营销时，提供关键词 "ROWELL-EMAIL-SOLO-2025" 即可调取完整归档。


---

## 🔍 50个产品抽样验证结果分析 (2025-01-03)

**数据来源**: 爬虫任务提供的验证结果文件 `产品验证结果_最终版.xlsx`

### Phase 1: 分析验证结果并识别问题
- [x] 读取验证结果Excel文件（4个工作表）
- [x] 分析验证统计数据（50个产品，7个已验证）
- [x] 识别主要问题类型
- [x] 统计问题分布（按品牌、产品类型）
- [x] 生成问题清单

### Phase 2: 创建产品数据改进行动计划
- [x] 针对产品名称不匹配问题制定解决方案
- [x] 针对未验证产品制定验证策略
- [x] 设计数据质量改进流程
- [x] 制定优先级和时间表

### Phase 3: 向用户报告发现和建议
- [x] 生成验证结果分析报告
- [x] 提供改进建议
- [x] 交付行动计划


---

## 🤔 产品数据策略选择：全面爬取 vs 渐进修复 (2025-01-03)

**背景**: 网站刚建设完毕，无客户无流量，产品库存在质量问题

### Phase 1: 对比两种策略
- [x] 分析全面爬取策略的优劣势
- [x] 分析渐进修复策略的优劣势
- [x] 对比时间成本、技术难度、数据质量
- [x] 评估对业务的影响

### Phase 2: 分析法律风险和合规要求
- [x] 研究数据爬取的法律风险
- [x] 分析不同国家/地区的法律差异
- [x] 识别高风险和低风险的爬取行为
- [x] 制定风险规避策略

### Phase 3: 创建综合策略建议文档
- [x] 整合分析结果
- [x] 提供明确的策略建议
- [x] 制定实施路线图
- [x] 包含法律合规指南

### Phase 4: 向用户报告发现和建议
- [x] 生成策略对比报告
- [x] 提供决策建议
- [x] 交付实施方案


---

## 🤖 生成爬虫任务指令：小规模测试（2025-01-03）

**决策**: 方案A - 分阶段混合策略，先小规模测试

### Phase 1: 审查网站数据库结构并确定数据格式要求
- [x] 查看products表结构
- [x] 确定必需字段和可选字段
- [x] 确定最佳数据导入格式（CSV/JSON/Excel）
- [x] 设计数据验证规则

### Phase 2: 创建详细的爬虫任务指令文档
- [x] 选择测试品牌（建议Agilent）
- [x] 定义数据字段和格式
- [x] 制定技术要求和合规要求
- [x] 生成清晰的任务说明书

### Phase 3: 准备数据导入脚本
- [x] 编写数据导入脚本
- [x] 编写数据验证脚本
- [x] 测试导入流程

### Phase 4: 交付指令并等待爬虫任务结果
- [x] 交付爬虫任务指令文档
- [ ] 等待爬虫任务返回数据
- [ ] 验证数据质量
- [ ] 导入数据库


---

## 🔄 产品数据冲突解决策略（2025-01-03）

**问题**: 现有2000+产品，新爬取数据导入后如何处理冲突和重复？

### Phase 1: 分析现有产品库并识别潜在冲突
- [x] 查询现有产品数量和品牌分布
- [x] 分析产品ID和零件号的唯一性
- [x] 识别可能的冲突场景

### Phase 2: 设计数据更新策略和去重逻辑
- [x] 定义冲突判断规则（基于productId/partNumber）
- [x] 设计更新策略（更新 vs 跳过 vs 删除旧数据）
- [x] 制定数据清理规则

### Phase 3: 更新导入脚本的冲突解决逻辑
- [x] 修改import-crawler-data.mjs脚本
- [x] 添加冲突检测和处理逻辑
- [x] 添加数据清理选项

### Phase 4: 向用户报告策略和建议
- [x] 生成数据更新策略文档
- [x] 提供操作建议


---

## 📥 处理爬虫任务返回数据（2025-01-04）

**收到文件**: 
- agilent_products_test_20251104.csv
- Agilent_HPLC_色谱柱数据采集报告.docx

### Phase 1: 审查爬虫任务报告并验证CSV数据质量
- [x] 阅读爬虫任务报告
- [x] 验证CSV文件格式
- [x] 检查数据完整性
- [x] 随机抽查数据准确性

### Phase 2: 使用准备好的脚本导入CSV数据到数据库
- [x] 复制CSV文件到项目目录
- [x] 运行import-crawler-data.mjs脚本
- [x] 审查导入报告

### Phase 3: 验证导入结果和网站产品展示
- [x] 查询数据库验证导入
- [x] 检查网站产品列表
- [x] 验证产品详情页

### Phase 4: 生成综合导入报告和下一步建议
- [x] 生成完整的导入报告
- [x] 提供下一步行动建议


---

## 🚀 生成全面爬取指令：完善产品库（2025-01-04）

**目标**: 为11个品牌生成完整的爬虫任务指令，建立完善的产品库

### Phase 1: 分析现有产品库并定义爬取范围
- [x] 查询各品牌现有产品数量
- [x] 定义各品牌目标产品数量
- [x] 制定优先级策略

### Phase 2: 创建全面的爬虫任务指令
- [x] 生成11个品牌的详细爬取指令
- [x] 定义数据字段和质量标准
- [x] 制定执行时间表和优先级

### Phase 3: 交付指令并准备大规模数据导入
- [x] 交付爬虫任务指令文档
- [x] 准备批量导入流程
- [x] 制定质量监控机制


---

## 🔍 Waters和Thermo Fisher样本数据验证（2025-01-04）

**目标**: 验证Waters和Thermo Fisher样本产品数据质量，评估规模化可行性

### Phase 1: 验证CSV数据质量和完整性
- [x] 读取并分析Waters CSV文件
- [x] 读取并分析Thermo Fisher CSV文件
- [x] 检查数据完整性和准确性
- [x] 生成数据质量报告

### Phase 2: 导入样本产品到数据库
- [x] 导入Waters样本产品
- [x] 导入Thermo Fisher样本产品
- [x] 验证导入结果

### Phase 3: 验证网站产品展示
- [x] 检查产品列表页
- [x] 检查产品详情页
- [x] 验证搜索和筛选功能

### Phase 4: 生成验证报告和规模化建议
- [x] 生成完整的验证报告
- [x] 评估技术可行性
- [x] 提供规模化建议
